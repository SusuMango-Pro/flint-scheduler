<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Add mix · Mix Scheduler</title>
  <link rel="stylesheet" href="style.css" />
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore-compat.js"></script>
</head>

<body>
  <div class="container small">
    <header class="topbar fade-in">
      <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 8px;">
        <img src="https://www.flintlabs.com/flint-logo-white.svg" alt="Flint" style="height: 32px; width: auto;" />
        <h1 class="brand" style="margin: 0;">Add Mix</h1>
      </div>
      <p class="subtitle">Configure and stage a new mix</p>
    </header>

    <!-- TEMPLATES / QUICK ADD SECTION -->
    <section class="card fade-in" id="templatesSection"
      style="display:none; border-color: var(--primary); background: rgba(16, 185, 129, 0.02);">
      <div class="cardHead">
        <h2 class="text-primary">Quick Add from Template</h2>
      </div>
      <div id="templatesList"></div>
      <hr style="margin: 32px 0; border: none; border-top: 1px solid var(--border);">
      <h3>Create New Template</h3>
      <p class="text-dim" style="font-size: 0.9rem; margin-bottom: 20px;">Save a set of components for future use.</p>

      <div class="formRow">
        <div class="field">
          <label>Template Name *</label>
          <input id="templateName" placeholder="e.g. Standard Explosive Mix" />
        </div>
        <div class="field">
          <label>Category</label>
          <input id="templateCategory" placeholder="e.g. Explosive, Fertilizer" list="categoryOptions" />
        </div>
      </div>
      <div class="field" style="margin-bottom: 20px;">
        <label>Description (optional)</label>
        <input id="templateDescription" placeholder="Notes about this template" />
      </div>

      <div id="templateComponentsList" style="margin: 24px 0;"></div>
      <button class="btn" id="addTemplateComponentBtn">+ Add component</button>
      <div style="margin-top: 24px; display: flex; align-items: center; gap: 16px;">
        <button class="btn primary" id="saveTemplateBtn">Save Template</button>
        <div id="templateMsg" class="msg" style="margin: 0;"></div>
      </div>
    </section>

    <section class="card fade-in" style="animation-delay: 0.1s;">
      <div class="formRow">
        <div class="field">
          <label>Batch Number (optional)</label>
          <input id="batchNumber" placeholder="e.g. Batch 1, Batch 2" />
        </div>
        <div class="field">
          <label>Mix Name *</label>
          <input id="mixName" placeholder="e.g. Standard Explosive Mix" />
        </div>
      </div>

      <div class="formRow">
        <div class="field">
          <label>Category</label>
          <input id="mixCategory" placeholder="e.g. Explosive, Fertilizer" list="categoryOptions" />
          <datalist id="categoryOptions">
            <option value="Explosive">
            <option value="Fertilizer">
            <option value="Chemical">
            <option value="Pyrotechnic">
            <option value="Test">
            <option value="Other">
          </datalist>
        </div>
      </div>

      <div class="field" style="margin-bottom: 24px;">
        <label>Description (optional)</label>
        <textarea id="mixDescription" placeholder="Optional notes about this mix"
          style="resize: vertical; min-height: 80px;"></textarea>
      </div>

      <h3 style="margin-top: 32px; margin-bottom: 16px;">Mixing Components</h3>

      <div id="componentStagesList"></div>

      <button class="btn" id="addComponentStageBtn" style="margin-top: 12px;">+ Add component</button>

      <div
        style="margin-top: 40px; border-top: 1px solid var(--border); padding-top: 24px; display: flex; align-items: center; justify-content: space-between;">
        <a class="btn" href="index.html">← Back</a>
        <div style="display: flex; align-items: center; gap: 16px;">
          <div id="msg" class="msg" style="margin: 0;"></div>
          <button class="btn primary" id="createMixBtn">Create mix</button>
        </div>
      </div>
    </section>
  </div>

  <script type="module" src="main.js"></script>
</body>

</html>