<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Add mix · Mix Scheduler</title>
  <link rel="stylesheet" href="style.css" />
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore-compat.js"></script>
</head>

<body>
  <div class="container small">
    <header>
      <h1>Add a new mix</h1>
      <p class="subtitle">Create a mix with custom component stages, category, and color.</p>
    </header>

    <!-- TEMPLATES / QUICK ADD SECTION -->
    <section class="card" id="templatesSection" style="display:none;">
      <div class="cardHead">
        <h2>Quick Add from Template</h2>
      </div>
      <div id="templatesList"></div>
      <hr style="margin: 20px 0;">
      <h3>Create New Template</h3>
      <div class="formRow">
        <div class="field">
          <label>Template Name *</label>
          <input id="templateName" placeholder="e.g. Standard Explosive Mix" />
        </div>
        <div class="field">
          <label>Category</label>
          <input id="templateCategory" placeholder="e.g. Explosive, Fertilizer" list="categoryOptions" />
        </div>
        <div class="field">
          <label>Description (optional)</label>
          <input id="templateDescription" placeholder="Notes about this template" />
        </div>
      </div>
      <div class="formRow">
        <!-- Color picker removed: color is now assigned by category automatically. -->
      </div>
      <div id="templateComponentsList" style="margin: 15px 0;"></div>
      <button class="btn" id="addTemplateComponentBtn">+ Add component stage</button>
      <div style="margin-top: 15px;">
        <button class="btn primary" id="saveTemplateBtn">Save Template</button>
      </div>
      <div id="templateMsg" class="msg"></div>
    </section>

    <section class="card">
      <div class="formRow">
        <div class="field">
          <label>Batch Number (optional)</label>
          <input id="batchNumber" placeholder="e.g. Batch 1, Batch 2" />
        </div>
        <div class="field">
          <label>Mix Name *</label>
          <input id="mixName" placeholder="e.g. Standard Explosive Mix" />
        </div>
      </div>

      <div class="formRow">
        <div class="field">
          <label>Category</label>
          <input id="mixCategory" placeholder="e.g. Explosive, Fertilizer" list="categoryOptions" />
          <datalist id="categoryOptions">
            <option value="Explosive">
            <option value="Fertilizer">
            <option value="Chemical">
            <option value="Pyrotechnic">
            <option value="Test">
            <option value="Other">
          </datalist>
        </div>
      </div>

      <div class="formRow">
        <div class="field">
          <label>Description (optional)</label>
          <textarea id="mixDescription" placeholder="Optional notes about this mix"
            style="resize: vertical; min-height: 60px;"></textarea>
        </div>
        <!-- Color picker removed: color is now assigned by category automatically. -->
      </div>

      <h3 style="margin-top: 20px; margin-bottom: 10px;">Mixing Stages (Components)</h3>

      <div id="componentStagesList"></div>

      <button class="btn" id="addComponentStageBtn" style="margin-top: 10px;">+ Add component stage</button>

      <button class="btn primary" id="createMixBtn" style="margin-top: 20px;">Create mix</button>
      <div class="rowEnd">
        <a class="btn" href="index.html">← Back</a>
      </div>

      <div id="msg" class="msg"></div>
    </section>
  </div>

  <script type="module" src="main.js"></script>
</body>

</html>